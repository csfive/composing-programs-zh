# 2.1 引言

::: details INFO
译者：[Mancuoj](https://github.com/mancuoj)

来源：[2.1 Introduction](https://www.composingprograms.com/pages/21-introduction.html)

对应：Lab 04、Cats
:::

第一章里，我们关注的是**计算过程**以及**函数在程序设计中的作用**：如何用原始数据（数字）和原始操作（算术）构造表达式，如何通过组合与控制形成复合函数，以及如何通过命名建立函数抽象。我们还见识了高阶函数带来的力量——围绕通用的计算模式进行操作与推理，从而扩展语言的表现力。这正是编程的核心。

本章的主角是**数据**。我们要学习用一系列技术来表示和处理各类信息。互联网的爆炸式增长让海量结构化数据触手可及，计算也因此能够应用到极为广泛的领域。熟练使用内置数据类型和自定义数据类型，是一切数据处理型应用的基石。

## 2.1.1 原始数据类型

Python 中的每个值都有一个类（class）来确定它的类型。属于同一类的值行为相似。比如整数 1 和 2 都是 `int` 类的实例，因此可以用同样的方式参与运算，如取反或相加。内置的 `type` 函数可以查看任意值的类。

```py
>>> type(2)
<class 'int'>
```

目前我们使用的值，几乎都是 Python 自带的少量**原始数据类型**的实例。原始数据类型有两大特点：

1. 存在一些可以直接求值为该类型的表达式，称为**字面量**（literal）。
2. 语言内置了操作该类型值的函数和运算符。

例如，`int` 是表示整数的原始类型。整数字面量（连续的数字串）求值后就是 `int`，算术运算符可以直接作用其上。

```py
>>> 12 + 3000000000000000000000000
3000000000000000000000012
```

Python 还包含另外两种原始数字类型：浮点数（`float`）和复数（`complex`）。

```py
>>> type(1.5)
<class 'float'>
>>> type(1+1j)
<class 'complex'>
```

**浮点数**：“float” 这一名称来源于许多语言处理实数的方式——小数点可以“浮动”。本书不会深入数字表示的细节，但了解 `int` 与 `float` 之间的差别很重要：`int` 可以**精确**表示任意大小的整数；而 `float` 能覆盖很宽的数值范围，却无法精确表示所有数值，有最小值和最大值，结果应被视为近似。多个 `float` 的组合可能累积误差；如果忽略近似，下面两个表达式理论上都等于 7。

> 译者注：不同于很多语言，Python 3 的 `int` 无上限，可存储任意大的整数，详见 [PEP 237](https://peps.python.org/pep-0237/)。

```py
>>> 7 / 3 * 3
7.0
>>> 1 / 3 * 7 * 3
6.999999999999999
```

即便都是 `int` 值，一旦相除，结果就变成了 `float`，得到的是对真实比值的有限近似。

```py
>>> type(1/3)
<class 'float'>
>>> 1/3
0.3333333333333333
```

在做相等性比较时，近似问题会显现出来。

```py
>>> 1/3 == 0.333333333333333312345  # 注意浮点近似
True
```

`int` 与 `float` 的细微区别，对程序正确性影响深远，是程序员必须熟记的细节。幸运的是，原始数据类型数量极少，学习成本很低；更棒的是，许多语言在这些细节上保持一致，比如遵循 [IEEE 754 浮点标准](http://en.wikipedia.org/wiki/IEEE_floating_point)。

**非数值类型**：值还可以表示声音、图像、地理位置、网址、网络连接等多种数据。有些可以直接用原始数据类型表示，比如 `True` 和 `False` 使用的 `bool` 类；更多的类型需要我们借助本章将要学习的“组合与抽象”手段自行定义。

接下来的小节会继续介绍 Python 的其他原始数据类型，并重点说明它们如何服务于数据抽象。想要更多细节，可以参考在线书籍《Dive Into Python 3》的 [原始数据类型](http://getpython3.com/diveintopython3/native-datatypes.html) 章节，里面对所有原始类型的行为、示例与技巧都有实用综述。
